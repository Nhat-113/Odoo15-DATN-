<odoo>
    <data>
        <record id="task_status" model="ir.ui.view">
            <field name="name">task.status</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='parent_id']" position="after">
                    <field name="status_id_domain" invisible="1"/>
                    <field name="status" domain="status_id_domain"  attrs="{'invisible': [('issues_type', '=', False)], 'required': [('issues_type', '!=', False)]}"/>
                    <field name="priority_type"/>
                    <field name="complex"/>
                </xpath>
                <xpath expr="//field[@name='tag_ids']" position="after">
                    <label for="issues_type" string="Type"/>
                    <div>
                        <field name="icon_path" class="issue_type_img oe_left" style="width :30%" attrs="{'invisible': [('icon_path', '=', False)]}"/>
                        <field name="issues_type" style="width :70%"/>
                    </div>
                </xpath>
                <xpath expr="//field[@name='recurring_task']" position="after">
                    <field name="task_score" widget="priority" eval="5"/>
                </xpath>
                <xpath expr="//field[@name='progress']" position="replace">
                    <field name="progress_input"/>
                </xpath>
            </field>
        </record>

        <record id="task_planned_hours" model="ir.ui.view">
            <field name="name">task.planned.hours</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="hr_timesheet.view_task_form2_inherited"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='planned_hours']" position="replace">
                    <field name="is_readonly" attrs="{'invisible': True}"/>
                    <field name="planned_hours" widget="timesheet_uom_no_toggle" nolabel="1" attrs="{'readonly': [('is_readonly','=', True)]}"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="project_status">
            <field name="name">project.status</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='stage_id']" position="after">
                    <field name="status" widget="statusbar" options="{'clickable': '1'}"/>
                </xpath>
                <xpath expr="//div[@name='dates']" position="after">
                    <field name="status_color" widget='badge' decoration-info="status_color == 'Open'" decoration-success="status_color == 'Processing'" decoration-danger="status_color == 'Close'" decoration-warning="status_color == 'Pending'"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="project_status_view_kanban">
            <field name="name">project.status.view.kanban</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_kanban_bottom_left')]" position="inside">
                    <div>
                        <field name="status_color" nolabel="1" widget='badge' decoration-info="status_color == 'Open'" decoration-success="status_color == 'Processing'" decoration-danger="status_color == 'Close'" decoration-warning="status_color == 'Pending'"/>
                    </div>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="quick_create_task_form_inherit">
            <field name="name">project.quick.create.task.form.inherit</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.quick_create_task_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_ids']" position="after">
                    <field name="issues_type" widget="selection"/>
                </xpath>
            </field>
        </record>

        <record model="ir.actions.act_window" id="project.act_project_project_2_project_task_all">
            <field name="domain">[('display_project_id', '=', active_id), ('issues_type', '=', 'Task')]</field>
        </record>

        <record id="issues_type_view_tree" model="ir.ui.view">
            <field name="name">view.tree</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_tree2"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='tag_ids']" position="after">
                    <field name="issues_type" widget="badge"/>
                    <field name="status_color" invisible="1"/>
                    <field name="status" widget="badge"/>
                    <field name="create_date" string="Create Date"/>
                </xpath>
                <xpath expr="//field[@name='progress']" position="replace">
                    <field name="progress_input"/>
                </xpath>
                <xpath expr="//field[@name='remaining_hours']" position="replace">
                    <field name="remaining_hours" widget="timesheet_uom" sum="Remaining Hours" optional="hide" decoration-danger="progress_input &gt;= 100" decoration-warning="progress_input &gt;= 80 and progress_input &lt; 100"/>
                </xpath>
                <xpath expr="//field[@name='activity_ids']" position="replace">
                    <field name="activity_ids" optional="hide"/>
                </xpath>
            </field>
        </record>

        <record id="issues_type_view_kanban" model="ir.ui.view">
            <field name="name">issues.type.view.kanban</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_kanban_bottom_left')]" position="inside">
                    <field name="status_color" invisible="1"/>
                    <t t-if="record.status_color.value != 'Yellow' and record.status_color.value != 'Lightblue'">
                        <div class="color_status" t-attf-style="background-color: {{record.status_color.value}}; color: white">
                            <field name="status"/>
                        </div>
                    </t>
                    <t t-if="record.status_color.value == 'Yellow' or record.status_color.value == 'Lightblue'">
                        <div class="color_status" t-attf-style="background-color: {{record.status_color.value}}; color: black">
                            <field name="status"/>
                        </div>
                    </t>
                </xpath>
            </field>
        </record>

        <record id="issues_type_tree_view" model="ir.ui.view">
            <field name="name">issues.type.tree.view</field>
            <field name="model">project.issues.type</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="description_issues"/>
                    <field name="icon_path" class="oe_avatar issue_type_img"/>
                    <field name="status" widget="many2many_tags" options="{'color_field': 'color'}"/>
                </tree>
            </field>
        </record>

        <record id="issues_type_form_view" model="ir.ui.view">
            <field name="name">issues.type.form.view</field>
            <field name="model">project.issues.type</field>
            <field name="arch" type="xml">
                <form >
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="description_issues"/>
                            <field name="icon" widget="image" class="oe_left issue_type_img"/>
                            <field name="status" widget="many2many_tags" options="{'color_field': 'color'}"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_task_search_form_inherit" model="ir.ui.view">
            <field name="name">project.task.search.form_inherit</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_search_form"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='starred']" position="before">
                    <filter string="Bug" name="bug" domain="[('issues_type.name', '=', 'Bug')]"/>
                    <filter string="Q&amp;A" name="qa" domain="[('issues_type.name', '=', 'Q&amp;A')]"/>
                    <separator/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="task_status_form_view">
            <field name="name">Status</field>
            <field name="model">project.task.status</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="color" widget="color_picker"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="task_status_tree_view">
            <field name="name">Status</field>
            <field name="model">project.task.status</field>
            <field name="arch" type="xml">
                <tree editable="top" sample="1">
                    <field name="name"/>
                    <field name="color" widget="color_picker" optional="show"/>
                </tree>
            </field>
        </record>

        <record id="issues_type_action" model="ir.actions.act_window">
            <field name="name">Issues Types</field>
            <field name="res_model">project.issues.type</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="task_status_action" model="ir.actions.act_window">
            <field name="name">Status</field>
            <field name="res_model">project.task.status</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="issues_action" model="ir.actions.act_window">
            <field name="name">Issues</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('issues_type', '!=', 'Task')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No tasks found. Let's create one!
                </p>
                <p>
                    To get things done, use activities and status on tasks.<br/>
                    Chat in real-time or by email to collaborate efficiently.
                </p>
            </field>
        </record>

        <menuitem name="Issues" id="menu_issues" parent="project.menu_main_pm" action="issues_action" sequence="3" groups="base.group_no_one,project.group_project_user"/>
        <menuitem id="issues_type_menu" name="Type" parent="project.menu_project_config" action="issues_type_action" sequence="11"/>
        <menuitem id="task_status_menu" name="Status" parent="project.menu_project_config" action="task_status_action" sequence="12"/>

    </data>
</odoo>