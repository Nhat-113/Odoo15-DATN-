<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_request_overtime_view_tree" model="ir.ui.view">
        <field name="name">hr.request.overtime.tree</field>
        <field name="model">hr.request.overtime</field>
        <field name="arch" type="xml">
            <tree string="Request Overtime" multi_edit="1" sample="1">
                <field name="name"/>
                <field name="project_id"/>
                <field name="user_id"/>
                <field name="member_ids" widget="many2many_avatar_user" />
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="company_id" groups="base.group_multi_company"/>
                <field name="description"/>
                <field name="stage_id" widget="badge"/>
            </tree>
        </field>
    </record>

    <record id="hr_request_overtime_view_form" model="ir.ui.view">
        <field name="name">hr.request.overtime.view.form</field>
        <field name="model">hr.request.overtime</field>
        <field name="arch" type="xml">
            <form string="Request Overtime - Form">
                <header>
                    <field name='submit_flag' invisible="1"/>
                    <field name='stage_name' invisible="1"/>
                    <field name='confirm_flag' invisible="1"/>
                    <field name='request_flag' invisible="1"/>
                    <field name='approve_flag' invisible="1"/>
                    <button string="Submit" name="action_submit_request_overtime" type="object" class="btn-primary" attrs="{'invisible': ['|', ('submit_flag', '!=', True), ('stage_name', '!=', 'Draw')]}" />
                    <button string="Confirm" name="action_confirm_request_overtime" type="object" class="btn-primary" attrs="{'invisible': ['|', ('confirm_flag', '!=', True), ('stage_name', '!=', 'Submit')]}"/>
                    <button string="Request" name="action_request_overtime" type="object" class="btn-primary" attrs="{'invisible': ['|', ('request_flag', '!=', True), ('stage_name', '!=', 'Confirm')]}"/>
                    <button string="Approval" name="action_approve_request_overtime" type="object" class="btn-primary" attrs="{'invisible': ['|', ('approve_flag', '!=', True), ('stage_name', '!=', 'Request')]}"/>
                    <button string="Refuse" name="action_refuse_reason" type="object" attrs="{'invisible': [('active', '=', False)]}" data-hotkey="x" />
                    <button string="Restore" name="toggle_active" type="object" attrs="{'invisible': [('active', '=', True)]}" data-hotkey="z"/>
                    <field name="stage_id" widget="statusbar" options="{'clickable': '1'}" attrs="{'invisible': [('active', '=', False)]}" />
                </header>
                <sheet>
                    <sheet>
                        <group>
                            <div class="oe_title" style="width: 500px">
                                <label for="name" class="oe_edit_only"/>
                                <h1>
                                    <field name="name" placeholder="e.g. Request overtime for project ... "/>
                                </h1>
                            </div>
                        </group>
                        <group >
                            <field name="active" invisible="1"/>
                            <group name="group_left">
                                <field name="project_id" options="{'no_create_edit': True, 'no_open': True}"/>
                                <field name="user_id" string="Project Manager" widget="many2one_avatar_user" domain="[('share', '=', False)]"/>
                                <field name="company_id" groups="base.group_multi_company"/>
                                <field name="request_creator_id" options="{'no_create_edit': True, 'no_open': True}"/>
                            </group>
                            <group name="group_right">
                                <label for="start_date" string="Dates"/>
                                <div name="end_date" class="o_row">
                                    <field name="start_date" widget="daterange" options='{"related_end_date": "end_date"}'/>
                                    <i class="fa fa-long-arrow-right mx-2 oe_edit_only" aria-label="Arrow icon" title="Arrow"/>
                                    <i class="fa fa-long-arrow-right mx-2 oe_read_only" aria-label="Arrow icon" title="Arrow" attrs="{'invisible': [('start_date', '=', False), ('end_date', '=', False)]}"/>
                                    <field name="end_date" widget="daterange" options='{"related_start_date": "start_date"}'/>
                                </div>
                                <field name="requester_id" options="{'no_create_edit': True, 'no_open': True}"/>
                                <field name="refuse_reason" attrs="{'invisible': [('active', '=', True)]}"/>
                            </group>
                        </group>
                        <separator string="Description"/>
                        <field name="description" placeholder="Description"/>
                        <group>
                            <field name="member_ids" widget="many2many_avatar_user" readonly="1" force_save="1"/>
                        </group>
                        <notebook>
                            <page string="Booking Overtime">
                                <field name="booking_overtime" colspan="4" nolabel="1">
                                    <tree string="Assign Members">
                                        <field name="read_stage" invisible="1"/>
                                        <field name="inactive" invisible='1'/>
                                        <field name="employee_id" widget="many2one_avatar" options="{'no_create': True}"/>
                                        <field name="start_date" />
                                        <field name="end_date" />
                                        <field name="duration" string="Duration"/>
                                        <field name="booking_time_overtime" />
                                        <field name="actual_overtime"/>
                                        <field name="description"/>
                                        <button name="timesheets_overtime_detail_action" string="Detail" type="object" class="oe_highlight"/>
                                    </tree>
                                    <form>
                                        <header>
                                        </header>
                                        <sheet>
                                            <div class="oe_title" style="width: 500px">
                                                <h1>
                                                    <field name="employee_id" widget="many2one_avatar" class="o_text_overflow" placeholder="Member Name" options="{'no_create': True}" />
                                                </h1>
                                            </div>
                                            <group col="4">
                                                <field name="start_date" />
                                                <field name="end_date"/>
                                                <field name="duration" />
                                                <field name="booking_time_overtime" />
                                                <field name="actual_overtime"/>
                                            </group>
                                            <separator string="Description"/>
                                            <field name="description" placeholder="Description..."/>
                                        </sheet>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </sheet>
            </form>
        </field>
    </record>

</odoo>