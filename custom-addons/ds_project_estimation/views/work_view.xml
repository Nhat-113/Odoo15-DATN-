<odoo>
    <record id="view_form_work" model="ir.ui.view">
        <field name="name">Work Form</field>
        <field name="model">estimation.work</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="check_generate_project" invisible="1"/>
                    <button name="action_generate_project" type="object" string="Generate Project" 
                                                            attrs="{'invisible': ['|', ('stage', '!=', 8), ('check_generate_project', '=', True)]}" 
                                                            class="oe_highlight" confirm="Generate Project Confirm"/>  <!-- 8 is id record completed. Get id because this model has no update -->
                </header>
                <sheet>
                    <group name="group_top">
                        <group name="group_left">
                            <field name="project_name" />
                            <field name="project_code" />
                            <field name="project_type_id" placeholder="Select project type ..."/>
                            <field name="estimator_ids" placeholder="Please select estimator ..." attrs="{'required': [('stage', '==', 8)]}"/> <!-- 8 is id record completed  -->
                            <field name="reviewer_ids" placeholder="Please select reviewer ..."/>
                        </group>
                        <group name="group_right">
                            <field name="deadline" />
                            <field name="sale_date" />
                            <field name="stage" domain='domain_stage' placeholder="Select current stage" />
                            <field name="currency_id" domain='currency_id_domain'
                                                        required="True" 
                                                        options="{'no_open': True,'no_quick_create':True,'no_create_edit':True}"/>
                            <field name="customer_ids" />
                            <field name="domain_stage" invisible="1"/>
                            <field name="currency_id_domain" invisible="1"/>
                        </group>
                    </group>
                    <separator string="Description" />
                    <field name="description" placeholder="Description"/>
                    <notebook>
                        <page string="Overview">
                            <field name="add_lines_overview">
                                <tree create="0" editable="0" delete="0">
                                    <field name="revision" />
                                    <field name="description" />
                                    <field name="author" />
                                    <field name="write_date" string="Update Date" />
                                </tree>
                            </field>
                        </page>
                        <page string="Summary">
                            <separator string="Total Cost" />
                            <field name="add_lines_summary_totalcost" create="0" editable="0" delete="0">
                                <tree editable="bottom" create="0" delete="0">
                                   <field name="sequence" invisible="1"/>
                                    <field name="name" />
                                    <field name="dev_effort" sum="Sum of Developer Effort"/>
                                    <field name="design_effort" sum="Sum of Designer Effort"/>
                                    <field name="tester_effort" sum="Sum of Tester Effort"/>
                                    <field name="comtor_effort" sum="Sum of Comtor Effort"/>
                                    <field name="brse_effort" sum="Sum of Brse Effort"/>
                                    <field name="pm_effort" sum="Sum of Project Manager Effort"/>
                                    <field name="total_effort" sum="Sum of All Efforts" width="115px"/>
                                    <field name="cost" sum="Total of Cost"/>
                                    <field name="check_activate" widget="boolean_toggle" nolabel="1"/>
                                </tree>
                            </field>
<!--                            <group name="note_group" col="6" class="mt-2 mt-md-0">-->
<!--                                <group class="oe_subtotal_footer" colspan="2" name="sale_total">-->
<!--                                    <field name="total_cost" readonly="1"/>-->
<!--                                </group>-->
<!--                                <div class="oe_clear"/>-->
<!--                            </group>-->
                            <separator string="Cost Rate" />
                            <field name="add_lines_summary_costrate" required="True">
                                <tree editable="bottom" create="0" delete="0" order="module_id desc">
                                    <field name="sequence" />
                                    <field name="name"/>
                                    <field name="types" />
                                    <field name="role" domain="[('job_type.job_position', '=', types)]"/>
                                    <field name="yen_month"  width="160px"/>
                                    <field name="yen_day"  width="145px"/>
<!--                                    <field name="vnd_day" />-->
                                </tree>
                            </field>
                        </page>
                        <page string="Resource Planning">
                            <separator string="Total Effort" />
                            <field name="add_lines_resource_effort">
                                <tree create="0" editable="0" delete="0" default_order='sequence'>
                                    <field name="sequence" invisible="1"/>
                                    <field name="name" />
                                    <field name="design_effort" />
                                    <field name="dev_effort" />
                                    <field name="tester_effort" />
                                    <field name="comtor_effort" />
                                    <field name="brse_effort" />
                                    <field name="pm_effort" />
                                    <field name="total_effort" decoration-bf="1" width="125px"/>
                                </tree>
                            </field>
                            <button string="View Gantt" attrs="{'invisible': [('add_lines_resource_effort', '=', [])]}" name="%(ds_project_estimation.action_view_gantt_resource_plan)d" type="action" class="btn-primary"/>
                        </page>
                        <page string="Module">
                            <separator string="Modules" />
                            <field name="add_lines_module">
                                <separator string="Assumption" />
                                <tree>
                                    <field name="sequence" invisible="1"/>
                                    <field name="component" />
                                    <field name="total_manday" readonly="1" width="120px" />
                                </tree>
                            </field>
                            <field name="sequence_module" readonly="1" invisible="1"/>
                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_tree_work" model="ir.ui.view">
        <field name="name">Work List</field>
        <field name="model">estimation.work</field>
        <field name="arch" type="xml">
            <tree default_order='create_date desc'>
                <field name="number"></field>
                <field name="estimator_ids" />
                <field name="reviewer_ids" />
                <field name="customer_ids" />
                <field name="potential_budget" widget="monetary" width="125px"/>
                <field name="total_cost" widget="monetary" />
                <field name="deadline" />
                <field name="stage" />
            </tree>
        </field>
    </record>

    <record id="view_estimation_module_form" model="ir.ui.view">
        <field name="name">estimation.module.form</field>
        <field name="model">estimation.module</field>
        <field name="arch" type="xml">
            <form >
                <sheet>
                    <group name="group_top">
                        <field name="component" placeholder="Please enter the module name ..."/>
                        <field name="sequence" invisible="1"/>
                        <field name="get_estimation_id" invisible="1"/>
                        <field name="check_compute" invisible="1"/>
                    </group>

                    <separator string="Modules" />
                    <field name="module_assumptions">
                        <tree editable="bottom">
                            <field name="assumption" />
                        </tree>
                    </field>
                    <separator string="Summary" />
                    <field name="module_summarys">
                        <tree create="0" editable="0" delete="0">
                            <field name="summary_type"/>
                            <field name="description" />
                            <field name="value"/>
                            <field name="type" invisible="1"/>
                        </tree>
                    </field>
                    <separator string="Effort distribution" />
                    <field name="module_effort_activity">
                        <tree create="0" editable="0" delete="0">
                            <field name="sequence" />
                            <field name="activity" />
                            <field name="effort" />
                            <field name="percent" />
                        </tree>
                    </field>
                    <button name='compute_load_activities' 
                            type="object" 
                            attrs="{'invisible': [('module_config_activity', '!=', [])]}" 
                            string="Load Activities" class="btn btn-primary"/>
                    <separator string='Work Breakdown Structure and Estimate' />
                    <field name="module_config_activity">
                        <tree create="0" >
                            <field name="sequence" />
                            <field name="activity" />
                            <field name="effort" />
                            <field name="check_default" invisible="1"/>
                        </tree>
                        <form>
                            <group col="4">
                                <field name="activity" />
                                <field name="activity_type" />
                                <field name="effort" />
                                <field name="activity_current" attrs="{'invisible': [('activity_type', '!=', 'type_1')], 'required' : [('activity_type', '=', 'type_1')]}" 
                                                                options="{'no_open': True,'no_quick_create':True,'no_create_edit':True}"
                                                                placeholder="Please select activity ..." />

                                <field name="sequence" invisible="1"/>
                                <field name="module_id" invisible="1"/>
                                <!-- <field name="domain_module_id" invisible="1"/> -->
                                <field name="check_default" invisible="1"/>
                                <field name="check_compute" invisible="1"/>
                                <field name="sequence_breakdown" invisible="1"/>
                                
                            </group>
                            <notebook>
                                <page string="Breakdown Estimation">
                                    <field name="add_lines_breakdown_activity">
                                        <tree editable="bottom">
                                            <field name="sequence"/>
                                            <field name="activity" required="1"/>
                                            <field name="job_pos" required="1"/>
                                            <field name="persons" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_3')]}" />
                                            <field name="days" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_3')]}" />
                                            <field name="percent_effort" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_1')]}"  width="140px"/>
                                            <field name="mandays" attrs="{'readonly': [('type', '!=', 'type_2')]}"  width="155px"/>
                                            <field name="type" invisible="1"/>
                                            <field name="check_compute" invisible="1"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </form>
                    </field>
                    <group name="note_group" col="6" class="mt-2 mt-md-0">
                        <group class="oe_subtotal_footer" colspan="2" name="sale_total">
                            <field name="total_manday" readonly="1" />
                            <field name="sequence_activities" readonly="1" invisible="1"/>
                        </group>
                        <div class="oe_clear"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
</odoo>