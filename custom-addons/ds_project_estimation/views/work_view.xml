<odoo>
    <record id="view_form_work" model="ir.ui.view">
        <field name="name">Work Form</field>
        <field name="model">estimation.work</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="check_generate_project" invisible="1"/>
                    <button name="action_generate_project" type="object" string="Generate Project" attrs="{'invisible': ['|', ('stage', '!=', 'completed'), ('check_generate_project', '=', True)]}" class="oe_highlight" confirm="Generate Project Confirm"/>
                </header>
                <sheet>
                    <group name="group_top">
                        <group name="group_left">
                            <field name="project_name" />
                            <field name="project_code" />
                            <field name="project_type_id" placeholder="Select project type ..."/>
                            <field name="estimator_ids" placeholder="Please select estimator ..."/>
                            <field name="reviewer_ids" placeholder="Please select reviewer ..."/>
                        </group>
                        <group name="group_right">
                            <field name="deadline" />
                            <field name="sale_date" />
                            <field name="stage" placeholder="Select current stage" />
                            <field name="currency_id_domain" invisible="1"/>
                            <field name="currency_id" domain='currency_id_domain'/>                            <field name="customer_ids" />
                        </group>
                    </group>
                    <separator string="Description" />
                    <field name="description" placeholder="Description"/>
                    <notebook>
                        <page string="Overview">
                            <field name="add_lines_overview">
                                <tree create="0" editable="0" delete="0">
                                    <field name="revision" />
                                    <field name="description" />
                                    <field name="author" />
                                    <field name="write_date" string="Update Date" />
                                </tree>
                            </field>
                        </page>
                        <page string="Summary">
                            <separator string="Total cost" />
                            <field name="add_lines_summary_totalcost" create="0" editable="0" delete="0">
                                <tree editable="bottom" create="0" delete="0">
                                    <field name="sequence" />
                                    <field name="module" />
                                    <field name="design_effort" sum="Sum of Designer Effort"/>
                                    <field name="dev_effort" sum="Sum of Developer Effort"/>
                                    <field name="tester_effort" sum="Sum of Tester Effort"/>
                                    <field name="comtor_effort" sum="Sum of Comtor Effort"/>
                                    <field name="brse_effort" sum="Sum of Brse Effort"/>
                                    <field name="pm_effort" sum="Sum of Project Manager Effort"/>
                                    <field name="total_effort" sum="Sum of All Efforts"/>
                                    <field name="cost" sum="Total of Cost"/>
                                </tree>
                            </field>
                            <group name="note_group" col="6" class="mt-2 mt-md-0">
                                <group class="oe_subtotal_footer" colspan="2" name="sale_total">
                                    <field name="total_cost" readonly="1"/>
                                </group>
                                <div class="oe_clear"/>
                            </group>
                            <separator string="Cost Rate" />
                            <field name="add_lines_summary_costrate">
                                <tree editable="bottom" create="0" delete="0">
                                    <field name="sequence" />
                                    <field name="types" />
                                    <field name="role" domain="[('job_type.job_position', '=', types)]"/>
                                    <field name="yen_month" />
                                    <field name="yen_day" />
                                    <field name="vnd_day" />
                                </tree>
                            </field>
                        </page>
                        <page string="Resource Planning">
                            <separator string="Total Effort" />
                            <field name="add_lines_resource_effort">
                                <tree create="0" editable="0" delete="0">
                                    <field name="sequence" />
                                    <field name="name" />
                                    <field name="design_effort" />
                                    <field name="dev_effort" />
                                    <field name="tester_effort" />
                                    <field name="comtor_effort" />
                                    <field name="brse_effort" />
                                    <field name="pm_effort" />
                                    <field name="total_effort" />
                                </tree>
                            </field>
                            <button string="View Gantts" name="%(ds_project_estimation.action_view_gantt_resource_plan)d" type="action" class="btn-primary"/>
                        </page>
                        <page string="Module">
                            <separator string="Assumption" />
                            <field name="add_lines_module_assumption">
                                <tree editable="bottom">
                                    <field name="assumption" />
                                </tree>
                            </field>
                            <separator string="Summary" />
                            <field name="add_lines_module_summary">
                                <tree create="0" editable="0" delete="0">
                                    <field name="summary_type"/>
                                    <field name="description" />
                                    <field name="value"/>
                                    <field name="type" invisible="1"/>
                                </tree>
                            </field>
                            <separator string="Effort distribution" />
                            <field name="add_lines_module_effort_distribute_activity">
                                <tree create="0" editable="0" delete="0">
                                    <field name="sequence" />
                                    <field name="activity" />
                                    <field name="effort" />
                                    <field name="percent" />
                                </tree>
                            </field>
                            <separator string='Work Breakdown Structure and Estimate' />
                            <field name="add_lines_module_activity">
                                <tree>
                                    <field name="sequence" />
                                    <field name="activity" />
                                    <field name="effort" />
                                </tree>
                                <form>
                                    <group col="4">
                                        <field name="sequence" />
                                        <field name="activity" />
                                        <field name="effort" />
                                        <field name="estimation_id" invisible="1"/>
                                        <field name="activity_type" />
                                        <field name="activity_current" attrs="{'invisible': [('activity_type', '!=', 'type_1')], 'required' : [('activity_type', '=', 'type_1')]}" placeholder="Please select activity ..." />
                                    </group>
                                    <notebook>
                                        <page string="Breakdown Estimation">
                                            <field name="add_lines_breakdown_activity">
                                                <tree editable="bottom">
                                                    <field name="sequence"/>
                                                    <field name="activity"/>
                                                    <field name="persons" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_3')]}" />
                                                    <field name="days" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_3')]}" />
                                                    <field name="job_pos"/>
                                                    <field name="percent_effort" attrs="{'column_invisible': [('parent.activity_type', '!=', 'type_1')]}" />
                                                    <field name="mandays" attrs="{'readonly': [('parent.activity_type', '=', 'type_1'), ('type', '=', 'type_3')]}" />
                                                    <field name="type" invisible="1"/>
                                                </tree>
                                            </field>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group name="note_group" col="6" class="mt-2 mt-md-0">
                                <group class="oe_subtotal_footer" colspan="2" name="sale_total">
                                    <field name="total_manday" readonly="1" />
                                </group>
                                <div class="oe_clear"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>

        </field>
    </record>

    <record id="view_tree_work" model="ir.ui.view">
        <field name="name">Work List</field>
        <field name="model">estimation.work</field>
        <field name="arch" type="xml">
            <tree default_order='create_date desc'>
                <field name="number"></field>
                <field name="estimator_ids" />
                <field name="reviewer_ids" />
                <field name="customer_ids" />
                <field name="expected_revenue" widget="monetary" />
                <field name="total_cost" widget="monetary" />
                <field name="deadline" />
                <field name="stage" />
            </tree>
        </field>
    </record>

</odoo>